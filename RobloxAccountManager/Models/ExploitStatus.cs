using System.Text.Json.Serialization;

namespace RobloxAccountManager.Models
{
    public class ExploitStatus
    {
        [JsonPropertyName("title")]
        public string Title { get; set; } = string.Empty;

        [JsonPropertyName("version")]
        public string Version { get; set; } = string.Empty;

        [JsonPropertyName("updatedDate")]
        public string UpdatedDate { get; set; } = string.Empty;

        [JsonPropertyName("free")]
        public bool IsFree { get; set; }

        [JsonPropertyName("detected")]
        public bool IsDetected { get; set; }

        [JsonPropertyName("updateStatus")]
        public bool IsUpdated { get; set; }

        [JsonPropertyName("websitelink")]
        public string WebsiteLink { get; set; } = string.Empty;

        [JsonPropertyName("platform")]
        public string Platform { get; set; } = string.Empty;

        [JsonPropertyName("cost")]
        public string Cost { get; set; } = "Free";

        [JsonPropertyName("uncPercentage")]
        public int UncPercentage { get; set; }

        [JsonPropertyName("extype")]
        public string ExType { get; set; } = string.Empty;

        public string TypeDisplay
        {
            get
            {
                if (ExType.Contains("external")) return "External";
                return "Executor";
            }
        }

        [JsonPropertyName("suncPercentage")]
        public double SuncPercentage { get; set; }

        [JsonPropertyName("decompiler")]
        public bool HasDecompiler { get; set; }

        [JsonPropertyName("multiInject")]
        public bool IsMultiInject { get; set; }

        public string UncDisplay => $"UNC: {UncPercentage}% | sUNC: {SuncPercentage}%";

        public string FeaturesDisplay
        {
            get
            {
                var features = new System.Collections.Generic.List<string>();
                if (HasDecompiler) features.Add("Decompiler");
                if (IsMultiInject) features.Add("Multi-Instance");
                return features.Count > 0 ? string.Join(", ", features) : "None";
            }
        }
    }
}
